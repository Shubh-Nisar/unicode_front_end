<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- font-awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <!-- TITLE ICON -->
    <link rel="icon" type="icon" href="../Task_1/pictures/shubh2.jpg">
    <!-- Local CSS file -->
    <link rel="stylesheet" href="../Task_2/contactMeForm.css">
    <!-- TOGGLE THEME CSS -->
    <link id="toggleTheme" rel="stylesheet" href="">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Contact Me | Shubh Nisar</title>
  </head>

  <body>
    <div class='navbar'>
        <h1>Portfolio</h1>
    </div>
    <div class="container block">
        <form action="" class="form-control" id='submitForm'>
            <div class="row">
                <h3>
                    Contact Me
                </h3>
                <!--<div class="block_elem-theme">
                    <a class='theme' id='themeBtn'><i class="fa fa-refresh"></i> DARK THEME</a>
                    <div class="switch">
                        <label>
                            <i class="fa fa-sun"></i>
                            <input type="checkbox" class='theme' id='themeBtn' onclick="toggleTheme()">
                            <span class="lever"></span>
                            <i class="fa fa-moon"></i>
                        </label>
                    </div>
                </div>-->
            </div>
            <div class="row">
                <div class="input-field col s12">
                  <input id="name" type="text" class="" onchange="checkFunction('text')">
                  <label for="name">Name: </label>
                  <div id='nameError' class='red-text'></div>
                  <div id='nameSuccess' class='green-text'></div>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                  <input id="email" type="email" class="" onchange="checkFunction('email')">
                  <label for="email">Email: </label>
                  <div id='emailError' class='red-text'></div>
                  <div id='emailSuccess' class='green-text'></div>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                  <input id="contact" type="number" class="" onchange="checkFunction('number')" inputmode="tel">
                  <label for="contact">Contact Number: </label>
                  <div id='contactError' class='red-text'></div>
                  <div id='contactSuccess' class='green-text'></div>
                </div>
            </div>
            <div class="row">
                <input type="submit" value="Submit">
                <div class="col s12">
                    <div id="formError" class='red-text'></div>
                </div>
            </div>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script>
        // HELPER TOGGLE VARIABLE //
        var toggle = "LIGHT_THEME";
        //window.localStorage.setItem("darkTheme", "false");
        // FUNCTIONAL LOGIC FOR TOGGLE //
        //function toggleTheme(){
            // FETCH SAME THEME AS THE MAIN PORTFOLIO PAGE //
            // LIGHT_THEME => DARK_THEME //
            if(window.localStorage.getItem("darkTheme") === "true"){
                document.getElementById('toggleTheme').href = '../Task_1/portfolioDarkTheme.css';
                //document.getElementById('themeBtn').innerHTML = '<i class="fa fa-refresh"></i>' + ' LIGHT THEME';  
                //toggle = "DARK_THEME";
                //window.localStorage.setItem("darkTheme", "false");
            } else if(window.localStorage.getItem("darkTheme") === "false"){
                // DARK_THEME => LIGHT_THEME //
                document.getElementById('toggleTheme').href = '../Task_1/portfolioLightTheme.css';
                //document.getElementById('themeBtn').innerHTML = '<i class="fa fa-refresh"></i>' + ' DARK THEME';   
                //toggle="LIGHT_THEME";
                //window.localStorage.setItem("darkTheme", "true");
            }   
        //}
        //toggleTheme();
            // FORM VALIDATION OBJECT //
            var type = null;
            var formIsValid = {
                name: false,
                email: false,
                contact: false,
            };
            // STATUS OF INDIVIDUAL FIELDS //
            var nameStatus, emailStatus, contactStatus;
            function checkFunction(type){
                console.log(type);
                var value = null;
                if (type == 'text'){
                    nameStatus = false;
                    value = document.getElementById('name').value
                    console.log(value);
                    // TEXT VALIDATION REGEX //
                    var criteria = /^([A-Za-z ])+$/g;
                    if(!value.match(criteria)){
                        console.log('Err');
                        document.getElementById('nameError').innerHTML = 'Please enter a valid name';
                        // UI VALIDATION RESPONSE //
                        setTimeout(() => {
                            document.getElementById('nameError').innerHTML = '';
                        }, 4000);
                    } else {
                        // UI VALIDATION RESPONSE //
                        console.log('No Err');
                        document.getElementById('nameSuccess').innerHTML = 'Valid Name Entry';
                        nameStatus = true;
                        setTimeout(() => {
                            document.getElementById('nameSuccess').innerHTML = '';
                        }, 4000);
                    }
                    formIsValid.name = true;
                }

                if (type == 'email'){
                    emailStatus = false;
                    value = document.getElementById('email').value
                    console.log(value);
                    // USER EMAIL VALIDATION REGEX //
                    var criteria = 	/^([a-zA-Z0-9_.]+)@([a-zA-Z0-9_.]+)\.([a-zA-Z]{2,5})$/g;
                    if(!value.match(criteria)){
                        console.log('Err');
                        document.getElementById('emailError').innerHTML = 'Please enter a valid email';
                        // UI VALIDATION RESPONSE //
                        setTimeout(() => {
                            document.getElementById('emailError').innerHTML = '';
                        }, 4000);
                    } else {
                        // UI VALIDATION RESPONSE //
                        console.log('No Err');
                        document.getElementById('emailSuccess').innerHTML = 'Valid Email Entry';
                        emailStatus = true;
                        setTimeout(() => {
                            document.getElementById('emailSuccess').innerHTML = '';
                        }, 4000);
                    }
                }

                if (type == 'number'){
                    contactStatus = false;
                    value = document.getElementById('contact').value
                    console.log(value);
                    // USER PHONE NUMBER VALIDATION REGEX //
                    var criteria = 	/^\d{10}$/g;
                    if(!value.match(criteria)){
                        console.log('Err');
                        document.getElementById('contactError').innerHTML = 'Please enter a valid mobile number';
                        // UI VALIDATION RESPONSE //
                        setTimeout(() => {
                            document.getElementById('contactError').innerHTML = '';
                        }, 4000);
                    } else {
                        // UI VALIDATION RESPONSE //
                        console.log('No Err');
                        document.getElementById('contactSuccess').innerHTML = 'Valid mobile number Entry';
                        contactStatus = true;
                        setTimeout(() => {
                            document.getElementById('contactSuccess').innerHTML = '';
                        }, 4000);
                    }
                }

            }
            // ENTIRE FORM VALIDATION //
            const checkFormStatus = (e) => {
                if(!nameStatus || !emailStatus || !contactStatus){
                    e.preventDefault();
                    console.log('ErrorStatus');
                    document.getElementById('formError').innerHTML = 'Please provide valid form inputs.';
                    setTimeout(() => {
                        document.getElementById('formError').innerHTML = '';
                    }, 4000);
                }
            };

            const submitForm = document.getElementById('submitForm');
            submitForm.addEventListener('submit', checkFormStatus);
            //console.log(submitForm);
        </script>
  </body>
</html>